<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/css/bootstrap4.3.1.min.css">
    <link rel="stylesheet" href="/css/bootstrap-icons1.8.1.css">
    <script src="/js/lib/axios.js"></script>
    <script src="/js/lib/vue.js"></script>
    <script src="/js/lib/jq3.6.js"></script>
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/js/popper1.14.1.min.js"></script>
    <script src="/js/bootstrap4.3.1.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">
    <title>个人中心</title>
</head>
<body>
<center style="margin-top: 120px;color: white"><h1> kloping bot 个人中心 </h1></center>
<script src="/js/header-top.js"></script>
<div id="divm" class="container" style="margin-top: 45px">
    <div class="row" style="margin-bottom: 25px;">
        <div class="col-2"></div>
        <div style="border-radius: 15px;background-color: rgba(142,211,180,0.4);text-align: center;"
             class=" col-8">
            <br>
            <img style="max-width: 75px"
                 :src="user.icon"
                 alt="icon">
            <br>
            <br>
            <div class="media-body">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">昵称</span>
                    </div>
                    <input type="text" aria-label="name" class="form-control" :value="user.nickname">
                </div>
                <br>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">邮箱</span>
                    </div>
                    <input type="text" aria-label="name" class="form-control" :value="user.eid">
                </div>
                <br>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">绑定QQ</span>
                    </div>
                    <input type="text" aria-label="name" class="form-control" :value="user.qid">
                </div>
                <br>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">注册方式</span>
                    </div>
                    <input type="text" aria-label="name" class="form-control" :value="user.type">
                </div>
            </div>
            <br>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-2"></div>
        <div style="border-radius: 15px;background-color: rgba(142,211,180,0.4);text-align: center;" class="col-8">
            <hr>
            <label for="image0">贡献网站背景图; 已贡献数量: <h5 style="color: #ff4e09;display: inline">{{in0}}</h5>
            </label>
            <div class="input-group">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <label class="input-group-text" for="image0t">图片格式</label>
                    </div>
                    <select class="custom-select" id="image0t">
                        <option value="0">横</option>
                        <option value="1">竖</option>
                    </select>
                </div>
                <div class="input-group mb-3">
                    <div class="custom-file">
                        <input type="file" accept="image/jpeg,image/png" onchange="image0change(this)"
                               class="custom-file-input"
                               id="image0"
                               aria-describedby="image0"
                               alt="img">
                        <label class="custom-file-label" for="image0">选择图片</label>
                    </div>
                    <div class="input-group-append">
                        <button class="btn btn-info" type="button" onclick="uploadi0()" id="uploadImage0">上传</button>
                    </div>
                </div>
                <img id="image0show" referrer="no-referrer" class="card-img-top img-responsive center-block"
                     src="" style="display: inline-block;max-width: 240px; "
                     alt="待展示图片">
            </div>
            <hr>
        </div>
    </div>
</div>
<script src="/js/utils.js"></script>
<script>
    let image = '';

    function image0change(file) {
        if (!file.files || !file.files[0]) {
            return;
        }
        let reader = new FileReader();
        reader.onload = function (evt) {
            document.getElementById('image0show').src = evt.target.result;
            image = file.files[0]
            console.log(evt)
        }
        reader.readAsDataURL(file.files[0]);
    }

    function uploadi0() {
        let t = $("#image0t").val()
        let param = new FormData();
        param.append("t", t)
        param.append("img", image)
        axios.post("/upload_image0", param).then(function (response) {
            alert(response.data)
        }).catch(function (err) {
            alert(err);
        })
    }

    let vm1 = new Vue({
        el: "#divm",
        created: function () {
            axios.get("/user").then(function (response) {
                vm1.user = response.data
                if (vm1.user.auth === null || vm1.user.auth === "") {

                } else {
                    axios.get("/getVerify0?code=" + vm1.user.auth).then(function (response) {
                        vm1.k1 = true
                        vm1.vd = response.data
                        console.log(vm1.vd)
                    }).catch(function (err) {
                        alert(err);
                    })
                }
            }).catch(function (err) {
                alert(err);
            })

            axios.get("/user_in0").then(function (response) {
                vm1.in0 = response.data
            }).catch(function (err) {
                alert(err);
            })
        }, data: {
            vd: {},
            user: {},
            k1: false,
            in0: 0
        }, methods: {
        }
    });
</script>
<script src="/js/footer-bottom.js"></script>
</body>
</html>