<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/css/bootstrap4.3.1.min.css">
    <link rel="stylesheet" href="/css/bootstrap-icons1.8.1.css">
    <script src="/js/lib/axios.js"></script>
    <script src="/js/lib/vue.js"></script>
    <script src="/js/lib/jq3.6.js"></script>
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/js/popper1.14.1.min.js"></script>
    <script src="/js/bootstrap4.3.1.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">
    <title>kloping bot 授权码状态</title>
</head>
<body>
<center style="margin-top: 120px;color: white"><h1> kloping bot 授权码状态 </h1></center>
<script src="/js/header-top.js"></script>
<div class="container" style="margin-top: 45px">
    <div class="row ">
        <div class="col-2"></div>
        <div style="border-radius: 15px;background-color: rgba(142,211,180,0.4);text-align: center;" class="col-8">
            <hr>
            <form id="codeForm" class="form-inline">
                <div class="form-group mx-sm-5 mb-2">
                    <label for="codeP" class="sr-only">授权码</label>
                    <input type="text" class="form-control" id="codeP" :value="vd.code" placeholder="授权码">
                </div>
                <input type="button" v-on:click="copy0()" class="btn btn-primary mb-2" value="复制"/>
                <div :class="'form-group mx-sm-5 mb-2 '+ je0(vd.expire)">{{je(vd.expire)}}</div>
            </form>
            <hr>
        </div>
    </div>
</div>
<script src="/js/utils.js"></script>
<script>
    const paramsStr = window.location.search
    const params = new URLSearchParams(paramsStr)
    let code = params.get('code')
    let vm1 = new Vue({
        el: "#codeForm",
        created: function () {
            axios.get("/getVerify0?code=" + code).then(function (response) {
                vm1.vd = response.data
                console.log(vm1.vd)
            }).catch(function (err) {
                alert(err);
            })
        }, data: {
            vd: {}
        }, methods: {
            je: function (t) {
                let dateTime = new Date(t)
                let nowTime = new Date()
                if (nowTime.getTime() > dateTime.getTime()) {
                    return "已过期"
                } else {
                    let year = dateTime.getFullYear()
                    let month = dateTime.getMonth() + 1
                    let day = dateTime.getDate()
                    let hour = dateTime.getHours()
                    return "至" + year + "-" + month + "-" + day
                }
            },
            je0: function (t) {
                let dateTime = new Date(t)
                let nowTime = new Date()
                if (nowTime.getTime() > dateTime.getTime()) {
                    return "alert alert-danger"
                } else {
                    return "alert alert-success"
                }
            }, copy0: function (text) {
                var copyText = document.getElementById("codeP");
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                navigator.clipboard.writeText(copyText.value);
            }
        }
    });
</script>
<script src="/js/footer-bottom.js"></script>
</body>
</html>